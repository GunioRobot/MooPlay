<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<title>index</title>
	
	<!-- MooTools -->
    <script src="/Assets/mootools-1.2.4-core-nc.js" type="text/javascript"></script>
    <script src="/Assets/mootools-1.2.4.4-more.js" type="text/javascript"></script>

    <!-- SubRipReader -->
    <script src="/Source/Video/Video.js" type="text/javascript"></script>
    <script src="/Source/Utils.js" type="text/javascript"></script>
    <script src="/Source/Control/Progress.js" type="text/javascript"></script>
    <script src="/Source/Control/PlayPause.js" type="text/javascript"></script>
    <script src="/Source/Display/Ratio.js" type="text/javascript"></script>
    <script src="/Source/Display/Time.js" type="text/javascript"></script>
    <script src="/Source/Subtitle/Item.js" type="text/javascript"></script>
    <script src="/Source/Subtitle/Tree.js" type="text/javascript"></script>
    <script src="/Source/Subtitle/Player.js" type="text/javascript"></script>
    <script src="/Source/Subtitle/Parser/Base.js" type="text/javascript"></script>
    <script src="/Source/Subtitle/Parser/SubRip.js" type="text/javascript"></script>
    
	<link rel="stylesheet" href="/Demo/demo.css" type="text/css" media="screen" title="no title" charset="utf-8">
</head>


<body>
    
<ul>
    <li><a href="#" id="load">load subtitle</a></li>
</ul>



<div style="width:400px; height:300px;">
    <div style="position:relative;">
        <video id="video" src="http://blip.tv/file/get/Framasoft-WhatsNewInFirefox35717.ogv" autobuffer="true" style="width:400px;height:300px;position:absolute;top:0;z-index:1"></video>
        <div id="subtitle" style="width:400px;height:300px;position:absolute;top:0;z-index:2"></div>
        <div style="clear:both;"></div>
    </div>
    <div style="clear:both;"></div>
</div>
<div style="clear:both;"></div>

<div style="border:1px solid #000; width:398px">
    <span id="time_container"></span>
</div>
<div style="border:1px solid #000; width:398px">
    <span id="ratio_container"></span> %
</div>



<div id="slider" style="width:400px;height:5px;background:#a0a0a0;">
    <div id="knob" style="width:5px;height:5px;background:#ffff80;"></div>
</div>
<br />
<form id="time_shift">
    <label for="time_shift_setter">subs time shift :</label>
    <input type="text" id="time_shift_setter" value="8050" />
    <input type="submit" value="set" />
</form>

<a id="playpausebutton" href="#">
    play/pause
</a>

<hr />
<p> The video used in this demonstration page is from Framasoft and the original file can be found <a href="http://blip.tv/file/2296139">here</a> </p>
<p> The subtitle file is a french translation made by Joan from Framalang and can be found <a href="http://www.framalang.org/wiki/Whats_new_in_firefox_three_five">here</a> </p>
<script>

var reader = null;

document.addEvent('domready', function() {
    
    $('load').addEvent('click', function(e) {
        e.preventDefault();
        new Video.Subtitle.Parser.SubRip({
            url: '/Assets/Framasoft-WhatsNewInFirefox35717.srt',
            onComplete: function(subs_hash) {
                reader = new Video.Subtitle.Player(subs_hash, $('video'), {
                    container: 'subtitle',
                    time_container: 'time'
                });
            }
        });
    });
    
    new Video.Control.PlayPause($('playpausebutton'), $('video'));
    
    $('time_shift').addEvent('submit', function(e){
        e.preventDefault();
        reader.setTimeShift($('time_shift_setter').value);
    });
    
    var slider = new Slider($('slider'), $('knob'));
    new Video.Control.Progress(slider, $('video'));
    
    new Video.Display.Time($('video'), $('time_container'));
    new Video.Display.Ratio($('video'), $('ratio_container'));
    
 
})
</script>

</body>
</html>
